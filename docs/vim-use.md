vim-use
=======


# 基本使用

## 光标移动

### 上下左右

```
hjkl --> 左下上右
```

### 单词间定位

```
如果是大写，则单词允许包含标点
w（向前跳到单词词首）
e（向前跳到单词词尾）
b（向后跳到单词词首）
```

### 行内定位

```
$（定位到行尾）
0（定位到行首）
^（定位到行首，忽略空格）
f 正向搜索ch字符，ch如果是字母则区分大小写
F 反向搜索ch字符，ch如果是字母则区分大小写
```

### 块定位

```
{（跳到上一个代码块）
}（跳到下一个代码块）
%（定位到另一个匹配的括号）
```

### 页面定位

```
gg（定位到页面的第一行）
G（定位到页面的最后一行）
H（定位到当前页面的顶部，High首字母大写）
M（定位到当前页面的中部，Middle首字母大写）
L（定位到当前页面的底部，Low首字母大写）

nG或ngg（定位到指定行，n表示行数，需大于0，
如果大于最大行数，则会直接跳转到页面最后一行）

m<a>和'<a>（这是一对很强大的命令，可标记一个位置，然后在同页面快速定位到该标志。
m表示mark，a是一个字母，可以是26字母的其中一个，'是单引号，后面跟上前面标记的字母）
```

## 屏幕滚动

### 整屏滚动

```
Ctrl + f （向下滚动一屏内容，Foward首字母小写）
Ctrl + b （向上滚动一屏内容，Backward首字母小写）
```

### 半屏滚动

```
Ctrl + d（向下滚动半屏内容，Down首字母小写）
Ctrl + u（向上滚动半屏内容，Up首字母小写）
```

### 行滚动

```
Ctrl + e（向下滚动一行内容） 
Ctrl + y（向上滚动一行内容）
```

## 编辑模式

### 插入

```
i（在光标处插入，insert首字母小写）
I（在行首插入，insert首字母大写）
a（在光标处后一个字符插入，append首字母小写）
A（在行尾插入，append首字母大写）
o（在上一行插入）
O（在下一行插入）
cc/S（清除当前行并进入插入模式）
s（清除当前字符并进入插入模式）
```

### 查找

```
/pattern（正向查找）
?pattern（反向查找）
n（查找下一个）
N（查找上一个）
*（当光标定位在某个单词时，查找下一个该单词）
#（当光标定位在某个单词时，查找上一个该单词）
```

### 替换

```
:%s/old/new/g（全局替换old为new）
:s/old/new/g（替换当前行old为new）
```

### 剪切、复制、粘贴

```
dd（剪切当前行的内容）
D（剪切光标后到行尾的内容）
yy/Y（复制当前行的内容）
p（粘贴到光标后）
P（粘贴到光标前）
```

### 撤销

```
u（撤销上一步，IDE一般都是Cmd + Z）
```

## 组合操作

组合操作可以看作是op+i/a+scope公式的应用，解释一下这个公式，
op就是我们前面提到的插入（c）、剪切（d）、复制（y）以及还未提到的选择（v），
i表示scope范围内，a表示包含scope标签，scope就是操作的范围了。这样讲比较抽象，
下面举例几个常用组合。

### 选择文本

```
以下如果将i换成a，则会将符号也包含进去
vib（选中小括号内的内容）
viB（选中大括号内的内容）
vi"（选中双引号内的内容）
vi'（选中单引号内的内容）
vi<（选中尖括号内的内容）

同理，将选择操作（v）替换成插入（c）、剪切（d）或者复制（y），也能实现类似的效果。
```
> note: `gd`选择光标所在的单词 


# 使用技巧

## vim-d使用

### 配置

比较和合并文件的时候经常需要结合上下文来确定最终要采取的操作。
Vimdiff 缺省是会把不同之处上下各 6 行的文本都显示出来以供参考。
其他的相同的文本行被自动折叠。

如果希望修改缺省的上下文行数为3行，可以这样设置：

```txt
:set diffopt=context:3
```

### 打开文件

* 同时打开两个文件

```sh
$ vim -d file1 file2
$ vimdiff file1 file2
```

* 在一个文件中，打开另外一个文件
```sh
:vert diffsplit file2
```
> note: 如果没有用vert命令，diffsplit则会分上下两个窗口

* 用split已经打开两个文件
```sh
:diffthis
```
> note: 分别在两个窗口中输入上面的命令

* 如果更新了某个窗口的内容，已经打开的窗口可以使用下面的命令更新

```sh
:diffupdate
```

### 定位

```txt
[c      往前跳
]c      往后跳
```

### 合并文档

```txt
dp      将当前文档的差异点应用到另一个文档 (diff put)
do      将另一个文档的内容拷贝到当前文档 (diff get)
```

### 操作

```txt
zf   创建折叠（使用数字表示创建有当前行到下多少行的折叠，比如3j就创建包括4行的折叠）
zo   打开折叠(l也可以打开折叠）
zc   关闭当前折叠
zm   关闭所有折叠
zr   打开所有折叠
zE   删除所有折叠
zd   删除当前折叠
za   若当前打开则关闭，若当前关闭则打开
zj   到下一折叠的开始处
zk   到上一折叠的末尾)
```

## 复制和粘贴

### 方式

* 用鼠标复制粘贴
* 用快捷键`ctrl+c`和`ctrl+v`
* 用快捷键`ctrl+shift+c`和`ctrl+shift+v`
* 用vim中的`dd`和`p`

### 问题

怎么在`vim`和其他软件中实现复制和粘贴

### 解决

* 打开vim，用`:reg`查看vim支持的剪贴板，查看是否有`"+`，这个就是系统剪贴板 
* 如果没有的话，就安装如下软件包

```txt
$ sudo apt-get install build-essential
$ sudo apt-get install ncurses-dev
$ sudo apt-get install xorg-dev
$ sudo apt-get install libgtk2.0-dev

sudo apt-get install vim vim-scripts vim-gnome vim-gtk
sudo apt-get install exuberant-ctags cscope
```

### 使用

* 从vim中复制到其他软件

在vim中选中一段文本，然后执行`"+y`，就把选中的文本放到了系统剪贴板中，然后在其他软件粘贴就可以了。

* 从其他软件中复制到vim

在其他软件中复制一段文本，然后执行`"+p`，就把系统剪贴板中的内容粘贴到了vim中

> note: 查看vim中的剪贴板用`:reg`






